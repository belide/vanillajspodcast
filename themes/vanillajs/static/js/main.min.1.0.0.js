/*! vanillajs v1.0.0 | (c) 2018 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/vanilla-js-podcast | Open Source Credits: https://github.com/filamentgroup/loadJS/, https://github.com/filamentgroup/loadCSS, https://github.com/bramstein/fontfaceobserver */
window.Array&&!Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){t=t||window;for(var s=0;s<this.length;s++)e.call(t,this[s],s,this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var latestEpisodes=function(e){"use strict";if(e){var t={itunes:"#",soundcloud:"https://soundcloud.com/vanillajspodcast/"},s=function(e){return{minutes:Math.round(parseInt(e,10)/1e3/60),seconds:Math.round(parseInt(e,10)/1e3%60)}},a=function(e){var a="";return e.forEach((function(e){var n=s(e.duration),r=e.title.split(" - ");a+='<li class="margin-bottom-small"><strong class="margin-right">'+r[0]+'</strong><a class="link-no-underline" href="'+t.soundcloud+e.permalink+'">'+r[1]+'</a> <span class="text-muted text-small">('+n.minutes+":"+n.seconds+")</span></li>"})),a},n=function(s){var n='<h2 class="h3">Latest Episodes</h2>';n+=a(s),e.innerHTML='<ul class="list-unstyled margin-bottom-medium">'+n+'</ul><p>Listen to full series on <a href="'+t.itunes+'">iTunes</a> or <a href="'+t.soundcloud+'">SoundCloud</a>.</p>'};!(function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&n(JSON.parse(e.response))},e.open("GET","http://api.soundcloud.com/users/422835952/tracks?client_id=HDNfsDscL9cEWTl8lfqFKfLPTErC4Qio"),e.send()})()}},mailchimp=function(e){"use strict";var t=document.querySelector("#mailchimp-form");if(t){var s=t.querySelector("#mailchimp-email");if(s){var a=t.querySelector("#mc-status"),n={empty:"Please provide an email address.",notEmail:"Please use a valid email address."},r=function(e){for(var t="",s=0;s<e.elements.length;s++){var a=e.elements[s];a.name&&!a.disabled&&"file"!==a.type&&"reset"!==a.type&&"submit"!==a.type&&"button"!==a.type&&(("checkbox"!==a.type&&"radio"!==a.type||a.checked)&&(t+="&"+encodeURIComponent(a.name)+"="+encodeURIComponent(a.value)))}return t},o=function(){a&&(a.innerHTML="",a.className="",s.className="",s.removeAttribute("aria-describedby"))},i=function(e,t){a&&(a.innerHTML=e,t?(a.className="success-message",a.setAttribute("tabindex","-1"),a.focus()):(a.className="error-message",s.className="error",s.setAttribute("aria-describedby","mc-status"),s.focus()))},c=function(){var e=t.querySelector("[data-processing]");e&&(e.setAttribute("data-original",e.innerHTML),e.setAttribute("disabled","disabled"),e.innerHTML=e.getAttribute("data-processing"))},x=function(){var e=t.querySelector("[data-processing]");e&&(e.removeAttribute("disabled"),e.innerHTML=e.getAttribute("data-original"))};window.mailchimpCallback=function(t){x();var s="error"!==t.result;i(t.msg,s),e&&"function"==typeof e&&e(t)};var l=function(){c();var e=t.getAttribute("action");e=e.replace("/post?u=","/post-json?u="),e+=r(t)+"&c=mailchimpCallback";var s=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,window.mcStatus=t.querySelector(".mc-status"),s.parentNode.insertBefore(a,s),a.onload=function(){this.remove()}},u=function(){return/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(s.value)},d=function(){return s.value.length<1?(i(n.empty),!1):!!u()||(i(n.notEmail),!1)},m=function(e){e.preventDefault(),o(),d()&&l()};t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",m,!1)}}};document.querySelector("#mailchimp-form")&&mailchimp((function(e){"error"!==e.result&&(window.location.href="https://gomakethings.com/newsletter-success")}));var episodes=document.querySelector("#latest-episodes");episodes&&latestEpisodes(episodes);